{"version":3,"file":"static/js/async/manage/page.js","sources":["/Users/ruofan.ruan/Desktop/projects/color-game/client/src/routes/manage/index.css","/Users/ruofan.ruan/Desktop/projects/color-game/client/src/generateToken.ts","/Users/ruofan.ruan/Desktop/projects/color-game/client/src/routes/manage/page.tsx"],"sourcesContent":["// extracted by css-extract-rspack-plugin\nexport {};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = undefined;\n        // 1736956363013\n        var cssReload = require(\"../../../../node_modules/.pnpm/@rspack+core@1.1.8_@swc+helpers@0.5.15/node_modules/@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","import CryptoJS from \"crypto-js\";\nexport function generateAuthHeader(payload: any) {\n  // This should match the server-side SECRET_KEY\n  const SECRET_KEY = \"KEfw-asdf-1234-5678-9012\";\n\n  const timestamp = Date.now().toString();\n  const token = CryptoJS.HmacSHA256(\n    JSON.stringify({\n      ...payload,\n      timestamp,\n    }),\n    SECRET_KEY\n  ).toString();\n\n  return {\n    token,\n    timestamp,\n  };\n}\n","import { useState } from \"react\";\nimport \"./index.css\";\nimport { generateAuthHeader } from \"@/generateToken\";\n\ninterface ScoreData {\n  playerName: string;\n  score: number;\n}\n\nexport default () => {\n  const [gameIdStart, setGameIdStart] = useState(\"\");\n  const [gameIdQuery, setGameIdQuery] = useState(\"\");\n\n  const [scores, setScores] = useState<ScoreData[]>([]);\n  const [message, setMessage] = useState({ text: '', type: '' });\n\n  const showMessage = (text: string, type: 'success' | 'error') => {\n    setMessage({ text, type });\n    setTimeout(() => setMessage({ text: '', type: '' }), 3000);\n  };\n\n  const handleStartGame = async () => {\n    try {\n      const response = await fetch('http://localhost:8501/start', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...generateAuthHeader({ gameId: gameIdStart }),\n        },\n        body: JSON.stringify({ gameId: gameIdStart }),\n      });\n      \n      if (response.ok) {\n        showMessage('Game started successfully!', 'success');\n      } else {\n        showMessage('Failed to start game', 'error');\n      }\n    } catch (error) {\n      showMessage('Error starting game', 'error');\n    }\n  };\n\n  const handleQueryScores = async () => {\n    try {\n      const response = await fetch(`http://localhost:8501/scores/${gameIdQuery}`, {\n        headers: generateAuthHeader({ gameId: gameIdQuery }),\n      });\n      const data = await response.json();\n      \n      if (response.ok) {\n        setScores(data);\n        if (data.length === 0) {\n          showMessage('No scores found for this game', 'error');\n        }\n      } else {\n        showMessage('Failed to fetch scores', 'error');\n      }\n    } catch (error) {\n      showMessage('Error fetching scores', 'error');\n    }\n  };\n\n  const handleClearData = async () => {\n    if (!window.confirm('Are you sure you want to clear all data?')) {\n      return;\n    }\n\n    try {\n      const response = await fetch('http://localhost:8501/clear', {\n        method: 'POST',\n        headers: generateAuthHeader({}),\n      });\n      \n      if (response.ok) {\n        setScores([]);\n        showMessage('Data cleared successfully', 'success');\n      } else {\n        showMessage('Failed to clear data', 'error');\n      }\n    } catch (error) {\n      showMessage('Error clearing data', 'error');\n    }\n  };\n\n  if (!localStorage.getItem(\"color-game-token\")) {\n    return null;\n  }\n\n  return (\n    <div className=\"manage-page\">\n      <div className=\"manage-section\">\n        <h2>Start Game</h2>\n        <div className=\"manage-form\">\n          <input\n            type=\"text\"\n            className=\"manage-input\"\n            value={gameIdStart}\n            onChange={(e) => setGameIdStart(e.target.value)}\n            placeholder=\"Enter Game ID\"\n          />\n          <button className=\"manage-button\" onClick={handleStartGame}>\n            Start Game\n          </button>\n        </div>\n      </div>\n\n      <div className=\"manage-section\">\n        <h2>Query Scores</h2>\n        <div className=\"manage-form\">\n          <input\n            type=\"text\"\n            className=\"manage-input\"\n            value={gameIdQuery}\n            onChange={(e) => setGameIdQuery(e.target.value)}\n            placeholder=\"Enter Game ID\"\n          />\n          <button className=\"manage-button\" onClick={handleQueryScores}>\n            Query Scores\n          </button>\n        </div>\n        \n        {scores.length > 0 && (\n          <table className=\"score-table\">\n            <thead>\n              <tr>\n                <th>Player Name</th>\n                <th>Score</th>\n              </tr>\n            </thead>\n            <tbody>\n              {scores.map((score, index) => (\n                <tr key={index}>\n                  <td>{score.playerName}</td>\n                  <td>{score.score}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n\n      <div className=\"manage-section\">\n        <h2>Clear Data</h2>\n        <button className=\"manage-button danger\" onClick={handleClearData}>\n          Clear All Data\n        </button>\n      </div>\n\n      {message.text && (\n        <div className={`${message.type}-message`}>\n          {message.text}\n        </div>\n      )}\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AAEA;AACA;AAGA;AAEA;AAGA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBA;AACA;AACA;AAOA;;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAEA;;;;;;;;;;AAAA;;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;;;AAPA;AASA;AACA;AACA;AACA;AACA;;;;;;AACA;AACA;;;;;;;;;;;AAEA;AAnBA;;;;AAqBA;AAAA;AAEA;;;;;;;;;;AAAA;;AAAA;AACA;AAAA;AAAA;AACA;;;AAFA;AAGA;;AAAA;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AACA;AACA;;;;;;;;;;;AAEA;AAlBA;;;;AAoBA;AAAA;AAMA;;;;AALA;AACA;;;AACA;;;;;;;;;AAGA;;AAAA;AACA;AACA;AACA;;;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;;;;;;AACA;AACA;;;;;;;;;;;AAEA;AApBA;;;;AAsBA;AACA;AACA;AAEA;AACA;;AACA;AAAA;;AACA;AAAA;;;;;;AACA;AAAA;;AACA;AACA;AACA;AACA;AACA;AAAA;;AACA;;;;;;AAEA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;AAMA;AAAA;;AACA;AAAA;;;;;;AACA;AAAA;;AACA;AACA;AACA;AACA;AACA;AAAA;;AACA;;;;;;AAEA;AAAA;AAAA;AAAA;;;;;;;;;;;;AAKA;AACA;;AACA;AACA;;AACA;AAAA;;;;;;AACA;AAAA;;;;;;;;;;;;;;;;;AAGA;AACA;AACA;;AACA;AAAA;;;;;;AACA;AAAA;;;;;;;AAFA;;;;;;;;;;;;;;;;;;;;;;;AAUA;AAAA;;AACA;AAAA;;;;;;AACA;AAAA;AAAA;AAAA;;;;;;;;;;;;AAKA;AACA;AACA;;;;;;;;;;;;AAKA"}